{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'analytics/css/dados.css'%}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <title>Dados</title>
</head>

<body>

    <header class="header">
        <div class="container-header">
            <!-- Logo -->
            <div class="logo">
                <div class="logo-icon">
                    <i class="bi bi-wallet2"></i>
                </div>
                <span class="logo-text">Financie.me</span>
            </div>

            <!-- Navegação -->
            <nav class="nav">
                <a href="{% url 'home' %}" class="nav-link">Dashboard</a>
                <a href="{% url 'transacoes' %}" class="nav-link">Transações</a>
                <a href="{% url 'analytics:dados' %}" class="nav-link active">Relatórios</a>
                <a href="{% url 'configuracoes'%}" class="nav-link">Configurações</a>
            </nav>

            <!-- Área direita: busca e usuário -->
            <div class="header-right">
                <div class="search-box">
                    <i class="bi bi-search"></i>
                    <input type="text" placeholder="Buscar...">
                </div>
                <div class="user-avatar">
                    <!-- <img src="" alt="User"> -->
                </div>
            </div>
        </div>
    </header>


    <div class="topo">

        {% if transacoes %}
        <form class="select-mes" method="get">
            <label for="mes">Mês</label>
            <select name="mes" id="mes" onchange="this.form.submit()">
                <option value="">Todos os meses</option>
                {% for numero, nome in meses %}
                    <option value="{{ numero }}" {% if numero == mes_selecionado %}selected{% endif %}>
                        {{ nome }}
                    </option>
                {% endfor %}
            </select>

            <label for="ano">Ano</label>
            <select name="ano" id="ano" onchange="this.form.submit()">
                <option value="">Todos os anos</option>
                {% for ano in anos_disponiveis %}
                    <option value="{{ ano }}" {% if ano == ano_selecionado %}selected{% endif %}>
                        {{ ano }}
                    </option>
                {% endfor %}
            </select>
        </form>


        <div class="centrais">

            <div class="saldo-mes">
                <h3>Saldo do mês</h3>
                <p>R$ {{ saldo_mes }}</p>
            </div>
            <div class="t-receitas">
                <h3>Receita total</h3>
                <p>R$ {{ receita_mes }}</p>
            </div>

            <div class="t-despesas">
                <h3>Despesa total</h3>
                <p>R$ {{ despesa_mes }}</p>
            </div>

        </div>
        

        <div class="info-1">
            <div class="mes-receita">
                <p><i class="bi bi-graph-up" style="color: green;"></i> Maior lucro:</p>
                <strong>{{ mes_maior_receita }} - R${{ valor_maior_receita }}</strong>
            </div>
            <div class="mes-despesa">
                
                <p><i class="bi bi-graph-down" style="color: rgb(185, 0, 0);
;"></i> Maior prejuizo:</p>
<strong>{{ mes_maior_despesa }} - R${{ valor_maior_despesa }}</strong>
            </div>
        </div>
        
    </div>

    {% else %}
    <div class="topo" style="display: none;">

    </div>

    {% endif %}

    {% if transacoes %}
    <div class="graficos-topo">

        <div class="g_1">
            {{ g_1|safe }}
        </div>

        <div class="g_2">
            {{ g_2|safe }}
        </div>

        <div class="g_3">
            {{ g_3|safe }}
        </div>

    </div>

    {% else %}
    <div class="graficos-topo">

        <h3>Registre transações para exibir dados</h3>

    </div>

    {% endif %}


</body>

</html>