{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'core/css/home.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <title>Controle Financeiro - Dashboard</title>
</head>

<body>
    <!-- ========================================
         HEADER - NAVEGAÇÃO SUPERIOR
         ======================================== -->
    <header class="header">
        <div class="container-header">
            <!-- Logo -->
            <div class="logo">
                <div class="logo-icon">
                    <i class="bi bi-wallet2"></i>
                </div>
                <span class="logo-text">Financie.me</span>
            </div>

            <!-- Navegação -->
            <nav class="nav">
                <a href="#" class="nav-link active">Dashboard</a>
                <a href="/transacoes/" class="nav-link">Transações</a>
                <a href="/dados/" class="nav-link">Relatórios</a>
                <a href="#" class="nav-link">Configurações</a>
            </nav>

            <!-- Área direita: busca e usuário -->
            <div class="header-right">
                <div class="search-box">
                    <i class="bi bi-search"></i>
                    <input type="text" placeholder="Buscar...">
                </div>
                <div class="user-avatar">
                   <!--  <img src="{% static 'core/images/avatar.jpg' %}" alt="User"> -->
                </div>
            </div>
        </div>
    </header>

    <!-- ========================================
         CONTEÚDO PRINCIPAL
         ======================================== -->
    <main class="main-content">
        <div class="container">

            <!-- Título da página -->
            <div class="page-header">
                <h1>Dashboard Home</h1>
                <p>Controle suas entradas e saídas de forma inteligente.</p>
            </div>

            <!-- ========================================
                 CARDS DE RESUMO FINANCEIRO
                 ======================================== -->
            <div class="summary-cards">
                <!-- Card: Saldo Total -->
                <div class="summary-card">
                    <div class="card-header">
                        <span class="card-label">SALDO TOTAL</span>
                        <div class="card-icon blue">
                            <i class="bi bi-bank"></i>
                        </div>
                    </div>
                    <h2 class="card-value">R$ 12.450,00</h2>
                    <p class="card-variation positive">
                        <i class="bi bi-arrow-up"></i> +2,4% este mês
                    </p>
                </div>

                <!-- Card: Receitas do Mês -->
                <div class="summary-card">
                    <div class="card-header">
                        <span class="card-label">RECEITAS DO MÊS</span>
                        <div class="card-icon green">
                            <i class="bi bi-arrow-down-circle"></i>
                        </div>
                    </div>
                    <h2 class="card-value green-text">R$ 5.200,00</h2>
                    <p class="card-info">Previsto: R$ 5.500,00</p>
                </div>

                <!-- Card: Despesas do Mês -->
                <div class="summary-card">
                    <div class="card-header">
                        <span class="card-label">DESPESAS DO MÊS</span>
                        <div class="card-icon red">
                            <i class="bi bi-arrow-up-circle"></i>
                        </div>
                    </div>
                    <h2 class="card-value red-text">R$ 1.840,50</h2>
                    <p class="card-info">Previsto: R$ 2.100,00</p>
                </div>
            </div>

            <!-- ========================================
                 ÁREA DE FORMULÁRIOS (2 COLUNAS)
                 ======================================== -->
            <div class="forms-grid">
                
                <!-- COLUNA ESQUERDA: Registrar Transação -->
                <div class="form-card">
                    <div class="form-card-header">
                        <div class="form-icon blue">
                            <i class="bi bi-plus-circle"></i>
                        </div>
                        <h3>Registrar Transação</h3>
                    </div>

                    <form method="post" class="transaction-form">
                        {% csrf_token %}
                        <input type="hidden" name="tipo_form" value="transacao">

                        <div class="form-row">
                            <div class="form-group">
                                <label for="descricao">Descrição</label>
                                <input type="text" id="descricao" name="descricao_t" 
                                       placeholder="Ex: Almoço Executivo" maxlength="100" required>
                            </div>

                            <div class="form-group">
                                <label for="valor">Valor</label>
                                <input type="text" id="valor" name="valor" 
                                       placeholder="R$ 0,00" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="data">Data</label>
                                <input type="date" id="data" name="data" 
                                       placeholder="mm/dd/yyyy" required>
                            </div>

                            <div class="form-group">
                                <label for="categoria">Categoria</label>
                                <select id="categoria" name="categoria" required>
                                    <option value="">Selecione...</option>
                                    {% for categoria in categorias %}
                                    <option value="{{ categoria.id }}">
                                        {{ categoria.nome }} ({{ categoria.get_tipo_display }})
                                    </option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="conta">Conta</label>
                            <select id="conta" name="nome_conta" required>
                                <option value="">Selecione...</option>
                                {% for conta in contas %}
                                <option value="{{ conta.id }}">{{ conta.nome }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="observacoes">Observação</label>
                            <textarea id="observacoes" name="observacoes" 
                                      placeholder="Detalhes adicionais..." rows="3"></textarea>
                        </div>

                        <button type="submit" class="btn-primary">
                            <i class="bi bi-floppy"></i>
                            Salvar Transação
                        </button>
                    </form>
                </div>

                <!-- COLUNA DIREITA: Cards menores -->
                <div class="side-cards">
                    
                    <!-- Card: Adicionar Categoria -->
                    <div class="form-card compact">
                        <div class="form-card-header">
                            <div class="form-icon purple">
                                <i class="bi bi-tag"></i>
                            </div>
                            <h3>Adicionar Categoria</h3>
                        </div>

                        <form method="post" class="compact-form">
                            {% csrf_token %}
                            <input type="hidden" name="tipo_form" value="categoria">

                            <div class="toggle-group">
                                <button type="button" class="toggle-btn active" data-type="receita">
                                    Receita
                                </button>
                                <button type="button" class="toggle-btn" data-type="despesa">
                                    Despesa
                                </button>
                            </div>
                            <input type="hidden" name="tipo" id="tipo_categoria" value="receita">

                            <div class="form-group">
                                <label for="nome_categoria">NOME DA CATEGORIA</label>
                                <input type="text" id="nome_categoria" name="nome_cat" 
                                       placeholder="Ex: Educação" maxlength="100" required>
                            </div>

                            <div class="form-group">
                                <label for="descricao_categoria">DESCRICAO</label>
                                <input type="text" id="descricao_categoria" name="descricao_cat" maxlength="150" placeholder="Opicional">
                            </div>

                            <button type="submit" class="btn-secondary">
                                Adicionar
                            </button>
                        </form>
                    </div>

                    <!-- Card: Adicionar Conta -->
                    <div class="form-card compact">
                        <div class="form-card-header">
                            <div class="form-icon blue">
                                <i class="bi bi-credit-card"></i>
                            </div>
                            <h3>Adicionar Conta</h3>
                        </div>

                        <form method="post" class="compact-form">
                            {% csrf_token %}
                            <input type="hidden" name="tipo_form" value="contas">

                            <div class="form-group">
                                <label for="nome_conta">NOME DA CONTA</label>
                                <input type="text" id="nome_conta" name="nome_conta" 
                                       placeholder="Ex: Banco Inter" maxlength="20" required>
                            </div>

                            <div class="form-group">
                                <label for="saldo_inicial">SALDO INICIAL</label>
                                <input type="text" id="saldo_inicial" name="saldo_inicial" 
                                       placeholder="R$ 0,00">
                            </div>

                            <button type="submit" class="btn-secondary">
                                Criar Conta
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- ========================================
                 RESUMO FINANCEIRO SEMANAL (GRÁFICO)
                 ======================================== -->
            <div class="chart-card">
                <div class="chart-header">
                    <h3>Resumo Financeiro Semanal</h3>
                    <a href="#" class="link-view-more">
                        Ver histórico completo <i class="bi bi-arrow-right"></i>
                    </a>
                </div>

                <div class="chart-container">
                    <!-- Gráfico de barras simples em CSS -->
                    <div class="chart-bars">
                        <div class="chart-bar" style="height: 35%;"></div>
                        <div class="chart-bar" style="height: 60%;"></div>
                        <div class="chart-bar" style="height: 45%;"></div>
                        <div class="chart-bar" style="height: 80%;"></div>
                        <div class="chart-bar" style="height: 50%;"></div>
                        <div class="chart-bar" style="height: 40%;"></div>
                        <div class="chart-bar active" style="height: 100%;"></div>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- ========================================
         FOOTER
         ======================================== -->
    <footer class="footer">
        <div class="container">
            <p>© 2024 Financie.me - Sistema de Gestão Pessoal</p>
        </div>
    </footer>

</body>

<script src="{% static 'core/js/home.js' %}" defer></script>

</html>