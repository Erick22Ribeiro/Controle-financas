{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'core/css/transacoes.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <title>Transações - Controle Financeiro</title>
</head>

<body>
    <!-- ========================================
         HEADER - NAVEGAÇÃO SUPERIOR
         ======================================== -->
    <header class="header">
        <div class="container-header">
            <!-- Logo -->
            <div class="logo">
                <div class="logo-icon">
                    <i class="bi bi-wallet2"></i>
                </div>
                <span class="logo-text">Financie.me</span>
            </div>

            <!-- Navegação -->
            <nav class="nav">
                <a href="{% url 'home' %}" class="nav-link">Dashboard</a>
                <a href="{% url 'transacoes' %}" class="nav-link active">Transações</a>
                <a href="{% url 'analytics:dados' %}" class="nav-link">Relatórios</a>
                <a href="{% url 'configuracoes'%}" class="nav-link">Configurações</a>
            </nav>

            <!-- Área direita: busca e usuário -->
            <div class="header-right">
                <div class="search-box">
                    <i class="bi bi-search"></i>
                    <input type="text" placeholder="Buscar...">
                </div>
                <div class="user-avatar">
                    <!-- <img src="{% static 'core/images/avatar.jpg' %}" alt="User"> -->
                </div>
            </div>
        </div>
    </header>

    <!-- ========================================
         CONTEÚDO PRINCIPAL - HISTÓRICO DE TRANSAÇÕES
         ======================================== -->
    <main class="main-content">
        <div class="container">
            
            <!-- Card de Transações -->
            <div class="transactions-card">
                
                <!-- Cabeçalho com busca e filtros -->
                <div class="transactions-header">
                    <h2>Histórico de Transações</h2>
                    
                    <div class="header-controls">
                        <!-- Campo de busca -->
                        <div class="search-input">
                            <i class="bi bi-search"></i>
                            <input type="text" placeholder="Buscar descrição ou categoria...">
                        </div>
                        
                        <!-- Botão de filtros -->
                        <button class="btn-filters" onclick="toggleFilters()">
                            <i class="bi bi-funnel"></i>
                            Filtros
                        </button>
                    </div>
                </div>

                <!-- ========================================
                     ÁREA DE FILTROS
                     ======================================== -->
                <div class="filters-area" id="filtersArea">
                    <div class="filters-grid">
                        
                        <!-- Filtro: Período -->
                        <div class="filter-group">
                            <label>PERÍODO</label>
                            <select class="filter-select">
                                <option value="30">Últimos 30 dias</option>
                                <option value="60">Últimos 60 dias</option>
                                <option value="90">Últimos 90 dias</option>
                                <option value="all">Todo o período</option>
                            </select>
                        </div>

                        <!-- Filtro: Categoria -->
                        <div class="filter-group">
                            <label>CATEGORIA</label>
                            <select class="filter-select">
                                <option value="">Todas categorias</option>
                                {% for categoria in categorias %}
                                <option value="{{ categoria.id }}">{{ categoria.nome }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <!-- Filtro: Conta -->
                        <div class="filter-group">
                            <label>CONTA</label>
                            <select class="filter-select">
                                <option value="">Todas as contas</option>
                                {% for conta in contas %}
                                <option value="{{ conta.id }}">{{ conta.nome }}</option>
                                {% endfor %}
                            </select>
                        </div>

                    </div>
                </div>

                <!-- ========================================
                     TABELA DE TRANSAÇÕES
                     ======================================== -->
                <div class="table-container">
                    <table class="transactions-table">
                        <thead>
                            <tr>
                                <th>DATA</th>
                                <th>DESCRIÇÃO</th>
                                <th>CATEGORIA</th>
                                <th>CONTA</th>
                                <th class="text-right">VALOR</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% if transacoes %}
                                {% for transacao in transacoes %}
                                <tr class="transaction-row">
                                    <td class="td-date">{{ transacao.data|date:"d M. Y" }}</td>
                                    <td class="td-description">{{ transacao.descricao }}</td>
                                    <td>
                                        {% if transacao.categoria.tipo == 'receita' %}
                                        <span class="badge badge-green">{{ transacao.categoria.nome }}</span>
                                        {% else %}
                                        <span class="badge badge-blue">{{ transacao.categoria.nome }}</span>
                                        {% endif %}
                                    </td>
                                    <td class="td-account">{{ transacao.conta.nome }}</td>
                                    <td class="text-right">
                                        {% if transacao.categoria.tipo == 'receita' %}
                                        <span class="value-positive">+ R$ {{ transacao.valor|floatformat:2 }}</span>
                                        {% else %}
                                        <span class="value-negative">- R$ {{ transacao.valor|floatformat:2 }}</span>
                                        {% endif %}
                                    </td>
                                </tr>
                                {% endfor %}
                            {% else %}
                                <tr>
                                    <td colspan="5" class="empty-state">
                                        <i class="bi bi-inbox"></i>
                                        <p>Nenhuma transação encontrada</p>
                                    </td>
                                </tr>
                            {% endif %}
                        </tbody>
                    </table>
                </div>

                <!-- ========================================
                     PAGINAÇÃO
                     ======================================== -->
                <div class="pagination-area">
                    <p class="pagination-info">Mostrando 1-5 de 24 transações</p>
                    
                    <div class="pagination">
                        <button class="pagination-btn" disabled>
                            <i class="bi bi-chevron-left"></i>
                        </button>
                        <button class="pagination-btn active">1</button>
                        <button class="pagination-btn">2</button>
                        <button class="pagination-btn">3</button>
                        <button class="pagination-btn">
                            <i class="bi bi-chevron-right"></i>
                        </button>
                    </div>
                </div>

            </div>

        </div>
    </main>

    <!-- ========================================
         FOOTER
         ======================================== -->
    <footer class="footer">
        <div class="container">
            <p>© 2024 Financie.me - Sistema de Gestão Pessoal</p>
        </div>
    </footer>

</body>

<script>
    // Toggle de filtros
    function toggleFilters() {
        const filtersArea = document.getElementById('filtersArea');
        filtersArea.classList.toggle('active');
    }
</script>

</html>